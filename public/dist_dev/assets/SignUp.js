import{u as o,a as h,A as p,b as j,c as R,r as c,j as e,F as i,I as u,R as b,T as x,L as g,d as y,B as L}from"./index.js";import{r as w,L as m,t as I,R as d,u as N,a as v,b as U,c as F,d as k,e as q,f as T}from"./configForm.js";const E=()=>{const r=o(a=>a.register),n=h(),{notification:t}=p.useApp(),{t:s}=j(),{mutate:l,data:f}=R({mutationKey:["registerForm"],mutationFn:a=>r(a),onSuccess:a=>{if((a==null?void 0:a.status)!=="error")return t.success({message:s("successRegisterTitle"),description:s("successRegisterMessage")}),n("/")}});return{handleRegister:l,message:f}},S=()=>{const r=o(s=>s.formData.login),n=o(s=>s.isUnique),t=o(s=>s.checkUniqueLogin);return c.useEffect(()=>{let s;return r&&(s=setTimeout(()=>{t()},500)),()=>clearTimeout(s)},[r]),n},z=()=>{const r=o(t=>t.formData.login),n=o(t=>t.changeLogin);return{login:r,changeLogin:n}},$=()=>{const r=c.useRef(null),{login:n,changeLogin:t}=z(),s=S();return c.useEffect(()=>{r&&r.current.focus()},[]),e.jsx(i.Item,{className:"text-gray-200",hasFeedback:!0,validateStatus:s?"error":"success",help:s&&"Пользователь с таким именем уже существует",label:"Login",name:"name",rules:[w],children:e.jsx(u,{value:n,onChange:l=>t(l.target.value),ref:r,size:"large",prefix:e.jsx(b,{}),suffix:e.jsx(x,{placement:"right",title:e.jsx(m,{listRiles:I,field:"Логин"}),children:e.jsx(d,{})})})})},A=()=>{const[r]=i.useForm(),{handleRegister:n,message:t}=E(),s=N();return e.jsxs(i,{className:"min-w-80 pt-[80px]",onFinish:n,form:r,layout:"vertical",children:[e.jsx(i.Item,{children:e.jsxs(g,{to:s,className:`flex w-full gap-2 justify-center rounded-md border\r
                            border-gray-300 bg-white py-3 px-4 text-sm font-medium text-black shadow-sm hover:bg-gray-50`,children:[e.jsx(v,{style:{fontSize:"20px"}}),"Sign Up with Google"]})}),e.jsx(i.Item,{children:e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("div",{className:"flex-grow border-t border-gray-200"}),e.jsx("span",{className:"mx-4 text-xs text-gray-200 text-center uppercase whitespace-nowrap",children:"Or"}),e.jsx("div",{className:"flex-grow border-t border-gray-200"})]})}),e.jsx($,{}),e.jsx(i.Item,{className:"text-gray-200",label:"Email",name:"email",rules:[U],children:e.jsx(u,{size:"large",prefix:e.jsx(F,{})})}),e.jsx(i.Item,{className:"text-gray-200",label:"Password",name:"password",rules:[k],children:e.jsx(u,{size:"large",prefix:e.jsx(q,{}),suffix:e.jsx(x,{placement:"right",title:e.jsx(m,{listRiles:T,field:"Пароль"}),children:e.jsx(d,{})})})}),e.jsx("small",{className:"text-red-500 block mt-2",children:t==null?void 0:t.message}),e.jsx(i.Item,{children:e.jsxs(y,{align:"center",justify:"space-between",children:[e.jsx(L,{type:"default",htmlType:"submit",children:"Регистрация"}),e.jsx(g,{className:"text-gray-200",to:"/signin",children:"Уже есть аккаунт?"})]})})]})},P=()=>e.jsx("section",{className:"bg-container min-h-[calc(100vh_-_170px)] flex justify-center items-center",children:e.jsx(A,{})});export{P as default};
