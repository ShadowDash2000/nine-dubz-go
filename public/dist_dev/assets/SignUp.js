import{u as o,a as p,A as h,b as j,c as R,r as c,j as e,F as i,I as u,R as b,T as x,L as g,B as y}from"./index.js";import{r as L,L as m,t as w,R as f,u as I,a as N,b as v,c as U,d as F,e as k,f as q}from"./configForm.js";import{F as T}from"./index2.js";const E=()=>{const r=o(a=>a.register),n=p(),{notification:t}=h.useApp(),{t:s}=j(),{mutate:l,data:d}=R({mutationKey:["registerForm"],mutationFn:a=>r(a),onSuccess:a=>{if((a==null?void 0:a.status)!=="error")return t.success({message:s("successRegisterTitle"),description:s("successRegisterMessage")}),n("/")}});return{handleRegister:l,message:d}},S=()=>{const r=o(s=>s.formData.login),n=o(s=>s.isUnique),t=o(s=>s.checkUniqueLogin);return c.useEffect(()=>{let s;return r&&(s=setTimeout(()=>{t()},500)),()=>clearTimeout(s)},[r]),n},z=()=>{const r=o(t=>t.formData.login),n=o(t=>t.changeLogin);return{login:r,changeLogin:n}},$=()=>{const r=c.useRef(null),{login:n,changeLogin:t}=z(),s=S();return c.useEffect(()=>{r&&r.current.focus()},[]),e.jsx(i.Item,{className:"text-gray-200",hasFeedback:!0,validateStatus:s?"error":"success",help:s&&"Пользователь с таким именем уже существует",label:"Login",name:"name",rules:[L],children:e.jsx(u,{value:n,onChange:l=>t(l.target.value),ref:r,size:"large",prefix:e.jsx(b,{}),suffix:e.jsx(x,{placement:"right",title:e.jsx(m,{listRiles:w,field:"Логин"}),children:e.jsx(f,{})})})})},A=()=>{const[r]=i.useForm(),{handleRegister:n,message:t}=E(),s=I();return e.jsxs(i,{className:"min-w-80 pt-[80px]",onFinish:n,form:r,layout:"vertical",children:[e.jsx(i.Item,{children:e.jsxs(g,{to:s,className:`flex w-full gap-2 justify-center rounded-md border\r
                            border-gray-300 bg-white py-3 px-4 text-sm font-medium text-black shadow-sm hover:bg-gray-50`,children:[e.jsx(N,{style:{fontSize:"20px"}}),"Sign Up with Google"]})}),e.jsx(i.Item,{children:e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("div",{className:"flex-grow border-t border-gray-200"}),e.jsx("span",{className:"mx-4 text-xs text-gray-200 text-center uppercase whitespace-nowrap",children:"Or"}),e.jsx("div",{className:"flex-grow border-t border-gray-200"})]})}),e.jsx($,{}),e.jsx(i.Item,{className:"text-gray-200",label:"Email",name:"email",rules:[v],children:e.jsx(u,{size:"large",prefix:e.jsx(U,{})})}),e.jsx(i.Item,{className:"text-gray-200",label:"Password",name:"password",rules:[F],children:e.jsx(u,{size:"large",prefix:e.jsx(k,{}),suffix:e.jsx(x,{placement:"right",title:e.jsx(m,{listRiles:q,field:"Пароль"}),children:e.jsx(f,{})})})}),e.jsx("small",{className:"text-red-500 block mt-2",children:t==null?void 0:t.message}),e.jsx(i.Item,{children:e.jsxs(T,{align:"center",justify:"space-between",children:[e.jsx(y,{type:"default",htmlType:"submit",children:"Регистрация"}),e.jsx(g,{className:"text-gray-200",to:"/signin",children:"Уже есть аккаунт?"})]})})]})},B=()=>e.jsx("section",{className:"bg-container min-h-[calc(100vh_-_170px)] flex justify-center items-center",children:e.jsx(A,{})});export{B as default};
