import{u as i,a as x,A as d,b as f,c as h,r as l,j as e,F as a,I as u,R as p,L as m,d as j,e as R,B as y}from"./index.js";import{r as b,u as w,R as I,a as N,b as L,c as v,d as U}from"./configForm.js";import{F}from"./index2.js";const k=()=>{const r=i(o=>o.register),n=x(),{notification:t}=d.useApp(),{t:s}=f(),{mutate:c,data:g}=h({mutationKey:["registerForm"],mutationFn:o=>r(o),onSuccess:o=>{if((o==null?void 0:o.status)!=="error")return t.success({message:s("successRegisterTitle"),description:s("successRegisterMessage")}),n("/")}});return{handleRegister:c,message:g}},q=()=>{const r=i(s=>s.formData.login),n=i(s=>s.isUnique),t=i(s=>s.checkUniqueLogin);return l.useEffect(()=>{let s;return r&&(s=setTimeout(()=>{t()},500)),()=>clearTimeout(s)},[r]),n},E=()=>{const r=i(t=>t.formData.login),n=i(t=>t.changeLogin);return{login:r,changeLogin:n}},S=()=>{const r=l.useRef(null),{login:n,changeLogin:t}=E(),s=q();return l.useEffect(()=>{r&&r.current.focus()},[]),e.jsx(a.Item,{className:"text-gray-200",hasFeedback:!0,validateStatus:s?"error":"success",help:s&&"Пользователь с таким именем уже существует",label:"Login",name:"name",rules:[b],children:e.jsx(u,{value:n,onChange:c=>t(c.target.value),ref:r,size:"large",prefix:e.jsx(p,{})})})},T=()=>{const[r]=a.useForm(),{handleRegister:n,message:t}=k(),s=w();return e.jsxs(a,{className:"min-w-80",onFinish:n,form:r,layout:"vertical",children:[e.jsx(a.Item,{children:e.jsxs(m,{to:s,className:`flex w-full gap-2 justify-center rounded-md border\r
                            border-gray-300 bg-white py-3 px-4 text-sm font-medium text-black shadow-sm hover:bg-gray-50`,children:[e.jsx(I,{style:{fontSize:"20px"}}),"Sign Up with Google"]})}),e.jsx(a.Item,{children:e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("div",{className:"flex-grow border-t border-gray-200"}),e.jsx("span",{className:"mx-4 text-xs text-gray-200 text-center uppercase whitespace-nowrap",children:"Or"}),e.jsx("div",{className:"flex-grow border-t border-gray-200"})]})}),e.jsx(S,{}),e.jsx(a.Item,{className:"text-gray-200",label:"Email",name:"email",rules:[N],children:e.jsx(u,{size:"large",prefix:e.jsx(L,{})})}),e.jsx(a.Item,{className:"text-gray-200",label:"Password",name:"password",rules:[v],children:e.jsx(u.Password,{size:"large",autocomplete:"off",prefix:e.jsx(U,{}),iconRender:c=>c?e.jsx(j,{style:{color:"white"}}):e.jsx(R,{style:{color:"white"}})})}),e.jsx("small",{className:"text-red-500 block mt-2",children:t==null?void 0:t.message}),e.jsx(a.Item,{children:e.jsxs(F,{align:"center",justify:"space-between",children:[e.jsx(y,{type:"default",htmlType:"submit",children:"Регистрация"}),e.jsx(m,{className:"text-gray-200",to:"/signin",children:"Уже есть аккаунт?"})]})})]})},C=()=>e.jsx("section",{className:"flex items-center mx-auto",children:e.jsx(T,{})});export{C as default};
