import{ac as P,r as o,C as Z,G as L,E as Oe,bk as Le,g as Me,m as Ae,o as y,l as He,a6 as Te,a9 as re,aC as _e,bl as se,bm as Fe,b7 as We,aY as Ge,Z as V,W as ke,bn as qe,bo as oe,bp as De,bq as Xe,Y as Ke,$ as le,br as Ye,j as i,u as Je,bs as ce,d as W,B as _,bf as Qe,F as Q,bc as de,bt as U,I as Ve,bu as F,bv as me,bb as ge,bw as Ze,b4 as Ue}from"./index.js";import{e as et,P as tt,S as nt}from"./index2.js";const ee=P.createContext({});ee.Consumer;var pe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r};const it=t=>{var{prefixCls:e,className:r,avatar:n,title:a,description:m}=t,d=pe(t,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:l}=o.useContext(Z),c=l("list",e),g=L(`${c}-item-meta`,r),f=P.createElement("div",{className:`${c}-item-meta-content`},a&&P.createElement("h4",{className:`${c}-item-meta-title`},a),m&&P.createElement("div",{className:`${c}-item-meta-description`},m));return P.createElement("div",Object.assign({},d,{className:g}),n&&P.createElement("div",{className:`${c}-item-meta-avatar`},n),(a||m)&&f)},at=P.forwardRef((t,e)=>{const{prefixCls:r,children:n,actions:a,extra:m,styles:d,className:l,classNames:c,colStyle:g}=t,f=pe(t,["prefixCls","children","actions","extra","styles","className","classNames","colStyle"]),{grid:s,itemLayout:u}=o.useContext(ee),{getPrefixCls:I,list:p}=o.useContext(Z),x=C=>{var v,O;return L((O=(v=p==null?void 0:p.item)===null||v===void 0?void 0:v.classNames)===null||O===void 0?void 0:O[C],c==null?void 0:c[C])},S=C=>{var v,O;return Object.assign(Object.assign({},(O=(v=p==null?void 0:p.item)===null||v===void 0?void 0:v.styles)===null||O===void 0?void 0:O[C]),d==null?void 0:d[C])},E=()=>{let C=!1;return o.Children.forEach(n,v=>{typeof v=="string"&&(C=!0)}),C&&o.Children.count(n)>1},z=()=>u==="vertical"?!!m:!E(),$=I("list",r),N=(a==null?void 0:a.length)&&P.createElement("ul",{className:L(`${$}-item-action`,x("actions")),key:"actions",style:S("actions")},a.map((C,v)=>P.createElement("li",{key:`${$}-item-action-${v}`},C,v!==a.length-1&&P.createElement("em",{className:`${$}-item-action-split`})))),M=s?"div":"li",R=P.createElement(M,Object.assign({},f,s?{}:{ref:e},{className:L(`${$}-item`,{[`${$}-item-no-flex`]:!z()},l)}),u==="vertical"&&m?[P.createElement("div",{className:`${$}-item-main`,key:"content"},n,N),P.createElement("div",{className:L(`${$}-item-extra`,x("extra")),key:"extra",style:S("extra")},m)]:[n,N,Oe(m,{key:"extra"})]);return s?P.createElement(Le,{ref:e,flex:1,style:g},R):R}),ue=at;ue.Meta=it;const rt=t=>{const{listBorderedCls:e,componentCls:r,paddingLG:n,margin:a,itemPaddingSM:m,itemPaddingLG:d,marginLG:l,borderRadiusLG:c}=t;return{[`${e}`]:{border:`${y(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderRadius:c,[`${r}-header,${r}-footer,${r}-item`]:{paddingInline:n},[`${r}-pagination`]:{margin:`${y(a)} ${y(l)}`}},[`${e}${r}-sm`]:{[`${r}-item,${r}-header,${r}-footer`]:{padding:m}},[`${e}${r}-lg`]:{[`${r}-item,${r}-header,${r}-footer`]:{padding:d}}}},st=t=>{const{componentCls:e,screenSM:r,screenMD:n,marginLG:a,marginSM:m,margin:d}=t;return{[`@media screen and (max-width:${n}px)`]:{[`${e}`]:{[`${e}-item`]:{[`${e}-item-action`]:{marginInlineStart:a}}},[`${e}-vertical`]:{[`${e}-item`]:{[`${e}-item-extra`]:{marginInlineStart:a}}}},[`@media screen and (max-width: ${r}px)`]:{[`${e}`]:{[`${e}-item`]:{flexWrap:"wrap",[`${e}-action`]:{marginInlineStart:m}}},[`${e}-vertical`]:{[`${e}-item`]:{flexWrap:"wrap-reverse",[`${e}-item-main`]:{minWidth:t.contentWidth},[`${e}-item-extra`]:{margin:`auto auto ${y(d)}`}}}}}},ot=t=>{const{componentCls:e,antCls:r,controlHeight:n,minHeight:a,paddingSM:m,marginLG:d,padding:l,itemPadding:c,colorPrimary:g,itemPaddingSM:f,itemPaddingLG:s,paddingXS:u,margin:I,colorText:p,colorTextDescription:x,motionDurationSlow:S,lineWidth:E,headerBg:z,footerBg:$,emptyTextPadding:N,metaMarginBottom:M,avatarMarginRight:R,titleMarginBottom:C,descriptionFontSize:v}=t;return{[`${e}`]:Object.assign(Object.assign({},He(t)),{position:"relative","*":{outline:"none"},[`${e}-header`]:{background:z},[`${e}-footer`]:{background:$},[`${e}-header, ${e}-footer`]:{paddingBlock:m},[`${e}-pagination`]:{marginBlockStart:d,[`${r}-pagination-options`]:{textAlign:"start"}},[`${e}-spin`]:{minHeight:a,textAlign:"center"},[`${e}-items`]:{margin:0,padding:0,listStyle:"none"},[`${e}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:c,color:p,[`${e}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${e}-item-meta-avatar`]:{marginInlineEnd:R},[`${e}-item-meta-content`]:{flex:"1 0",width:0,color:p},[`${e}-item-meta-title`]:{margin:`0 0 ${y(t.marginXXS)} 0`,color:p,fontSize:t.fontSize,lineHeight:t.lineHeight,"> a":{color:p,transition:`all ${S}`,"&:hover":{color:g}}},[`${e}-item-meta-description`]:{color:x,fontSize:v,lineHeight:t.lineHeight}},[`${e}-item-action`]:{flex:"0 0 auto",marginInlineStart:t.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${y(u)}`,color:x,fontSize:t.fontSize,lineHeight:t.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${e}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:E,height:t.calc(t.fontHeight).sub(t.calc(t.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:t.colorSplit}}},[`${e}-empty`]:{padding:`${y(l)} 0`,color:x,fontSize:t.fontSizeSM,textAlign:"center"},[`${e}-empty-text`]:{padding:N,color:t.colorTextDisabled,fontSize:t.fontSize,textAlign:"center"},[`${e}-item-no-flex`]:{display:"block"}}),[`${e}-grid ${r}-col > ${e}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:I,paddingBlock:0,borderBlockEnd:"none"},[`${e}-vertical ${e}-item`]:{alignItems:"initial",[`${e}-item-main`]:{display:"block",flex:1},[`${e}-item-extra`]:{marginInlineStart:d},[`${e}-item-meta`]:{marginBlockEnd:M,[`${e}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:C,color:p,fontSize:t.fontSizeLG,lineHeight:t.lineHeightLG}},[`${e}-item-action`]:{marginBlockStart:l,marginInlineStart:"auto","> li":{padding:`0 ${y(l)}`,"&:first-child":{paddingInlineStart:0}}}},[`${e}-split ${e}-item`]:{borderBlockEnd:`${y(t.lineWidth)} ${t.lineType} ${t.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${e}-split ${e}-header`]:{borderBlockEnd:`${y(t.lineWidth)} ${t.lineType} ${t.colorSplit}`},[`${e}-split${e}-empty ${e}-footer`]:{borderTop:`${y(t.lineWidth)} ${t.lineType} ${t.colorSplit}`},[`${e}-loading ${e}-spin-nested-loading`]:{minHeight:n},[`${e}-split${e}-something-after-last-item ${r}-spin-container > ${e}-items > ${e}-item:last-child`]:{borderBlockEnd:`${y(t.lineWidth)} ${t.lineType} ${t.colorSplit}`},[`${e}-lg ${e}-item`]:{padding:s},[`${e}-sm ${e}-item`]:{padding:f},[`${e}:not(${e}-vertical)`]:{[`${e}-item-no-flex`]:{[`${e}-item-action`]:{float:"right"}}}}},lt=t=>({contentWidth:220,itemPadding:`${y(t.paddingContentVertical)} 0`,itemPaddingSM:`${y(t.paddingContentVerticalSM)} ${y(t.paddingContentHorizontal)}`,itemPaddingLG:`${y(t.paddingContentVerticalLG)} ${y(t.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:t.padding,metaMarginBottom:t.padding,avatarMarginRight:t.padding,titleMarginBottom:t.paddingSM,descriptionFontSize:t.fontSize}),ct=Me("List",t=>{const e=Ae(t,{listBorderedCls:`${t.componentCls}-bordered`,minHeight:t.controlHeightLG});return[ot(e),rt(e),st(e)]},lt);var dt=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r};function H(t){var{pagination:e=!1,prefixCls:r,bordered:n=!1,split:a=!0,className:m,rootClassName:d,style:l,children:c,itemLayout:g,loadMore:f,grid:s,dataSource:u=[],size:I,header:p,footer:x,loading:S=!1,rowKey:E,renderItem:z,locale:$}=t,N=dt(t,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const M=e&&typeof e=="object"?e:{},[R,C]=o.useState(M.defaultCurrent||1),[v,O]=o.useState(M.defaultPageSize||10),{getPrefixCls:$e,renderEmpty:D,direction:ye,list:T}=o.useContext(Z),ve={current:1,total:0},te=h=>(j,B)=>{var J;C(j),O(B),e&&((J=e==null?void 0:e[h])===null||J===void 0||J.call(e,j,B))},Se=te("onChange"),Ce=te("onShowSizeChange"),be=(h,j)=>{if(!z)return null;let B;return typeof E=="function"?B=E(h):E?B=h[E]:B=h.key,B||(B=`list-item-${j}`),o.createElement(o.Fragment,{key:B},z(h,j))},je=()=>!!(f||e||x),b=$e("list",r),[Ie,Ee,Ne]=ct(b);let A=S;typeof A=="boolean"&&(A={spinning:A});const X=!!(A!=null&&A.spinning),Pe=Te(I);let G="";switch(Pe){case"large":G="lg";break;case"small":G="sm";break}const ze=L(b,{[`${b}-vertical`]:g==="vertical",[`${b}-${G}`]:G,[`${b}-split`]:a,[`${b}-bordered`]:n,[`${b}-loading`]:X,[`${b}-grid`]:!!s,[`${b}-something-after-last-item`]:je(),[`${b}-rtl`]:ye==="rtl"},T==null?void 0:T.className,m,d,Ee,Ne),w=et(ve,{total:u.length,current:R,pageSize:v},e||{}),ne=Math.ceil(w.total/w.pageSize);w.current>ne&&(w.current=ne);const ie=e&&o.createElement("div",{className:L(`${b}-pagination`)},o.createElement(tt,Object.assign({},w,{onChange:Se,onShowSizeChange:Ce})));let K=re(u);e&&u.length>(w.current-1)*w.pageSize&&(K=re(u).splice((w.current-1)*w.pageSize,w.pageSize));const we=Object.keys(s||{}).some(h=>["xs","sm","md","lg","xl","xxl"].includes(h)),ae=_e(we),k=o.useMemo(()=>{for(let h=0;h<se.length;h+=1){const j=se[h];if(ae[j])return j}},[ae]),Be=o.useMemo(()=>{if(!s)return;const h=k&&s[k]?s[k]:s.column;if(h)return{width:`${100/h}%`,maxWidth:`${100/h}%`}},[JSON.stringify(s),k]);let Y=X&&o.createElement("div",{style:{minHeight:53}});if(K.length>0){const h=K.map((j,B)=>be(j,B));Y=s?o.createElement(Fe,{gutter:s.gutter},o.Children.map(h,j=>o.createElement("div",{key:j==null?void 0:j.key,style:Be},j))):o.createElement("ul",{className:`${b}-items`},h)}else!c&&!X&&(Y=o.createElement("div",{className:`${b}-empty-text`},($==null?void 0:$.emptyText)||(D==null?void 0:D("List"))||o.createElement(We,{componentName:"List"})));const q=w.position||"bottom",Re=o.useMemo(()=>({grid:s,itemLayout:g}),[JSON.stringify(s),g]);return Ie(o.createElement(ee.Provider,{value:Re},o.createElement("div",Object.assign({style:Object.assign(Object.assign({},T==null?void 0:T.style),l),className:ze},N),(q==="top"||q==="both")&&ie,p&&o.createElement("div",{className:`${b}-header`},p),o.createElement(nt,Object.assign({},A),Y,c),x&&o.createElement("div",{className:`${b}-footer`},x),f||(q==="bottom"||q==="both")&&ie)))}H.Item=ue;var mt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M573 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40zm-280 0c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}},{tag:"path",attrs:{d:"M894 345a343.92 343.92 0 00-189-130v.1c-17.1-19-36.4-36.5-58-52.1-163.7-119-393.5-82.7-513 81-96.3 133-92.2 311.9 6 439l.8 132.6c0 3.2.5 6.4 1.5 9.4a31.95 31.95 0 0040.1 20.9L309 806c33.5 11.9 68.1 18.7 102.5 20.6l-.5.4c89.1 64.9 205.9 84.4 313 49l127.1 41.4c3.2 1 6.5 1.6 9.9 1.6 17.7 0 32-14.3 32-32V753c88.1-119.6 90.4-284.9 1-408zM323 735l-12-5-99 31-1-104-8-9c-84.6-103.2-90.2-251.9-11-361 96.4-132.2 281.2-161.4 413-66 132.2 96.1 161.5 280.6 66 412-80.1 109.9-223.5 150.5-348 102zm505-17l-8 10 1 104-98-33-12 5c-56 20.8-115.7 22.5-171 7l-.2-.1A367.31 367.31 0 00729 676c76.4-105.3 88.8-237.6 44.4-350.4l.6.4c23 16.5 44.1 37.1 62 62 72.6 99.6 68.5 235.2-8 330z"}},{tag:"path",attrs:{d:"M433 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}}]},name:"comment",theme:"outlined"},gt=function(e,r){return o.createElement(Ge,V({},e,{ref:r,icon:mt}))},pt=o.forwardRef(gt),ut=["className","component","viewBox","spin","rotate","tabIndex","onClick","children"],xe=o.forwardRef(function(t,e){var r=t.className,n=t.component,a=t.viewBox,m=t.spin,d=t.rotate,l=t.tabIndex,c=t.onClick,g=t.children,f=ke(t,ut),s=o.useRef(),u=qe(s,e);oe(!!(n||g),"Should have `component` prop or `children`."),De(s);var I=o.useContext(Xe),p=I.prefixCls,x=p===void 0?"anticon":p,S=I.rootClassName,E=L(S,x,r),z=L(Ke({},"".concat(x,"-spin"),!!m)),$=d?{msTransform:"rotate(".concat(d,"deg)"),transform:"rotate(".concat(d,"deg)")}:void 0,N=le(le({},Ye),{},{className:z,style:$,viewBox:a});a||delete N.viewBox;var M=function(){return n?o.createElement(n,N,g):g?(oe(!!a||o.Children.count(g)===1&&o.isValidElement(g)&&o.Children.only(g).type==="use","Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),o.createElement("svg",V({},N,{viewBox:a}),g)):null},R=l;return R===void 0&&c&&(R=-1),o.createElement("span",V({role:"img"},f,{ref:u,tabIndex:R,onClick:c,className:E}),M())});xe.displayName="AntdIcon";const xt=()=>i.jsx("svg",{viewBox:"8 0 469 469",focusable:"false","data-icon":"reply",width:"15px",height:"15px",fill:"currentColor","aria-hidden":"true",children:i.jsx("path",{d:`M397.305,207.826c-67.733-59.947-161.493-61.12-194.56-59.307V74.706c0-5.867-4.8-10.667-10.667-10.667\r
			c-2.453,0-4.907,0.853-6.827,2.453L3.918,215.826c-4.587,3.733-5.227,10.453-1.493,15.04c0.427,0.533,0.96,0.96,1.493,1.493\r
			l181.333,149.333c4.587,3.733,11.307,3.093,15.04-1.493c1.6-1.92,2.453-4.267,2.453-6.827v-77.013\r
			c34.667-8,175.147-30.507,246.613,103.36c1.813,3.52,5.44,5.653,9.387,5.653c3.413,0,6.72-1.6,8.853-4.693\r
			c1.28-1.813,1.813-4.053,1.813-6.293C469.305,312.999,445.091,250.279,397.305,207.826z M260.558,269.159\r
			c-41.067,0-70.72,8.427-71.467,8.64c-4.587,1.28-7.68,5.44-7.68,10.24v62.72l-153.92-126.72l153.92-126.72v62.72\r
			c0,5.867,4.8,10.667,10.667,10.667c0.427,0,0.853,0,1.28-0.107c1.173-0.107,115.2-12.907,189.76,53.227\r
			c35.2,31.147,56.213,75.2,62.72,130.987C391.758,284.306,315.811,269.159,260.558,269.159z`})}),fe=({code:t,commentId:e,setShowReplyPanel:r,userId:n,parentId:a})=>{const m=Je(l=>{var c;return(c=l.userInfo)==null?void 0:c.id}),{deleteComment:d}=ce();return i.jsxs(W,{gap:2,children:[i.jsx(_,{size:"small",type:"text",shape:"circle",onClick:()=>r(!0),icon:i.jsx(xe,{component:xt,style:{fontSize:"14px"}})}),m===n&&i.jsx(_,{size:"small",type:"text",shape:"circle",onClick:()=>d({code:t,commentId:e,parentId:a}),icon:i.jsx(Qe,{style:{fontSize:"14px"}})})]})},he=({code:t,parentId:e,setShowReplyPanel:r})=>{const[n]=Q.useForm(),{addReply:a}=ce(),m=({text:d})=>{d&&(a({code:t,parentId:e,text:d}),n.resetFields())};return i.jsx(de,{theme:{components:{Input:{paddingInline:0,borderRadius:"0"}}},children:i.jsxs(Q,{onFinish:m,form:n,className:"pt-2 flex flex-col gap-2",children:[i.jsx(Q.Item,{className:"mb-0",name:"text",children:i.jsxs(W,{gap:6,children:[i.jsx(U,{}),i.jsx(Ve.TextArea,{id:"replyPanel",showCount:!0,autoSize:{minRows:1},maxLength:5e3,placeholder:"Ответ",variant:"borderless"})]})}),i.jsxs(W,{justify:"end",gap:5,children:[i.jsx(_,{onClick:()=>r(!1),children:"Отмена"}),i.jsx(_,{htmlType:"submit",children:"Ответить"})]})]})})},ft=({title:t,description:e,createdAt:r,code:n,userId:a,userPicture:m,parentId:d,commentId:l})=>{const[c,g]=o.useState(!1);return i.jsx(H.Item,{children:i.jsx(H.Item.Meta,{avatar:i.jsx(U,{src:`/api/file/${m}`}),title:i.jsxs(W,{align:"center",gap:6,children:[i.jsx("p",{className:"text-gray-200",children:t}),i.jsx("small",{className:"text-gray-200/50",children:r}),i.jsx(fe,{code:n,userId:a,commentId:l,setShowReplyPanel:g,parentId:d})]}),description:i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-gray-200 text-[15px] break-all",children:e}),c&&i.jsx(he,{code:n,parentId:d,commentId:l,setShowReplyPanel:g})]})})})},ht=({code:t,refetch:e,parentId:r,isLoading:n,setOffset:a,showReplyList:m,setShowReplyList:d,subCommentsCount:l})=>{const c=F(s=>s.subCommentList)[r],g=F(s=>s.commentList)["a"+r].subCommentsCount,f=async()=>{await a(s=>s+10),e()};return i.jsxs(i.Fragment,{children:[i.jsxs(_,{className:"my-2 p-3 rounded-[13px]",onClick:()=>d(s=>!s),children:["Показать ответы (",l||(c==null?void 0:c.length),")"]}),m&&i.jsx(H,{loading:n,dataSource:c==null?void 0:c.map(({user:s,text:u,createdAt:I,id:p,parentId:x})=>{var S;return{parentId:x,commentId:p,title:s==null?void 0:s.name,userId:s.id,description:u,userPicture:(S=s.picture)==null?void 0:S.name,createdAt:me(I)}}),renderItem:({title:s,description:u,createdAt:I,parentId:p,userPicture:x,commentId:S,userId:E})=>i.jsx(ft,{code:t,title:s,userId:E,userPicture:x,commentId:S,parentId:p,createdAt:I,description:u})}),m&&l>10&&g-((c==null?void 0:c.length)||0)&&i.jsx(_,{className:"my-2 p-3 rounded-[13px]",onClick:f,children:"Показать больше"})]})},$t=({description:t,createdAt:e,title:r,code:n,subCommentsCount:a,userId:m,userPicture:d,commentId:l})=>{var z,$;const[c,g]=o.useState(0),[f,s]=o.useState(!1),[u,I]=o.useState(!1),p=F(N=>N.getReply),x=F(N=>N.subCommentList),{isLoading:S,refetch:E}=ge({queryKey:["getReply",l],queryFn:()=>p({code:n,commentId:l,offset:c}),enabled:!((z=x[l])!=null&&z.length)&&!!u});return i.jsx(H.Item,{className:"bg-gray-400/10 rounded-[10px] mb-3 last:mb-0 items-start",children:i.jsx(H.Item.Meta,{avatar:i.jsx(U,{src:`/api/file/${d}`}),title:i.jsxs(W,{align:"center",gap:6,children:[i.jsx("p",{className:"text-gray-200",children:r}),i.jsx("small",{className:"text-gray-200/50",children:e}),i.jsx(fe,{code:n,userId:m,setShowReplyPanel:s,commentId:l})]}),description:i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-gray-200 text-[15px] break-all",children:t}),(!!a||!!(($=x[l])!=null&&$.length))&&i.jsx(ht,{code:n,offset:c,refetch:E,parentId:l,setOffset:g,isLoading:S,showReplyList:u,setShowReplyList:I,subCommentsCount:a}),f&&i.jsx(he,{code:n,setShowReplyPanel:s,parentId:l})]})})})},St=({code:t})=>{const e=F(d=>d.getComments),r=F(d=>d.commentList),n=Array(4).fill(0),{isLoading:a}=ge({queryKey:["getComments"],queryFn:async()=>e({code:t,offset:0}),enabled:!!t});o.useEffect(()=>(console.log("mount"),()=>console.log("unmount")));const m=Object.entries(r).reduce((d,l)=>{var c,g,f,s;return l[0]==="commentsCount"?d:[...d,{userId:(c=l[1].user)==null?void 0:c.id,commentId:l[1].id,subCommentsCount:l[1].subCommentsCount,title:(g=l[1].user)==null?void 0:g.name,userPicture:(s=(f=l[1])==null?void 0:f.user.picture)==null?void 0:s.name,description:l[1].text,createdAt:me(l[1].createdAt)}]},[]);return i.jsx(i.Fragment,{children:a?n.map((d,l)=>i.jsx(Ze,{loading:a,active:!0,avatar:!0},l)):i.jsx(de,{renderEmpty:()=>i.jsx(Ue,{image:i.jsx(pt,{style:{fontSize:"50px",color:"rgb(229 231 235 / 0.4)"}}),imageStyle:{height:"auto"},description:i.jsx("p",{className:"text-gray-200/40 max-w-[400px] mx-auto text-[17px]",children:"Будьте первым кто оставит комментарий!"})}),children:i.jsx(H,{dataSource:m,loading:a,renderItem:({title:d,description:l,createdAt:c,commentId:g,subCommentsCount:f,userId:s,userPicture:u})=>i.jsx($t,{code:t,title:d,userId:s,commentId:g,userPicture:u,description:l,subCommentsCount:f,createdAt:c})})})})};export{St as default};
